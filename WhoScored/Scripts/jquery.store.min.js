(function(a,b){a.store=function(f,c){var e=this;if(typeof f=="string"){if(a.store.drivers[f]){this.driver=a.store.drivers[f]}else{throw new Error("Unknown driver "+f)}}else{if(typeof f=="object"){var d=!a.isFunction(f.init)||!a.isFunction(f.get)||!a.isFunction(f.set)||!a.isFunction(f.del)||!a.isFunction(f.flush);if(d){throw new Error("The specified driver does not fulfill the API requirements")}this.driver=f}else{a.each(a.store.drivers,function(){if(!a.isFunction(this.available)||!this.available()){return true}e.driver=this;if(e.driver.init()===false){e.driver=null;return true}return false})}}if(!c){c=a.store.serializers}this.serializers={};a.each(c,function(g,h){if(!a.isFunction(this.init)){return true}e.serializers[g]=this;e.serializers[g].init(e.encoders,e.decoders)})};a.extend(a.store.prototype,{get:function(c){var d=this.driver.get(c);return this.driver.encodes?d:this.unserialize(d)},set:function(c,d){this.driver.set(c,this.driver.encodes?d:this.serialize(d))},del:function(c){this.driver.del(c)},flush:function(){this.driver.flush()},driver:b,encoders:[],decoders:[],serialize:function(d){var c=this;a.each(this.encoders,function(){var f=c.serializers[this+""];if(!f||!f.encode){return true}try{d=f.encode(d)}catch(g){}});return d},unserialize:function(d){var c=this;if(!d){return d}a.each(this.decoders,function(){var e=c.serializers[this+""];if(!e||!e.decode){return true}d=e.decode(d)});return d}});a.store.drivers={localStorage:{ident:"$.store.drivers.localStorage",scope:"browser",available:function(){try{if(!!window.localStorage){window.localStorage.setItem("jQuery Store Availability test",true);window.localStorage.removeItem("jQuery Store Availability test");return true}return false}catch(c){return false}},init:a.noop,get:function(c){return window.localStorage.getItem(c)},set:function(c,d){window.localStorage.setItem(c,d)},del:function(c){window.localStorage.removeItem(c)},flush:function(){window.localStorage.clear()}},userData:{ident:"$.store.drivers.userData",element:null,nodeName:"userdatadriver",scope:"browser",initialized:false,available:function(){try{return !!(document.documentElement&&document.documentElement.addBehavior)}catch(c){return false}},init:function(){if(this.initialized){return}try{this.element=document.createElement(this.nodeName);document.documentElement.insertBefore(this.element,document.getElementsByTagName("title")[0]);this.element.addBehavior("#default#userData");this.initialized=true}catch(c){return false}},get:function(c){this.element.load(this.nodeName);return this.element.getAttribute(c)},set:function(c,d){this.element.setAttribute(c,d);this.element.save(this.nodeName)},del:function(c){this.element.removeAttribute(c);this.element.save(this.nodeName)},flush:function(){var c=this.element.xmlDocument.firstChild.attributes;for(var d=c.length-1;d>=0;d--){this.element.removeAttribute(c[d].nodeName)}this.element.save(this.nodeName)}},windowName:{ident:"$.store.drivers.windowName",scope:"window",cache:{},encodes:true,available:function(){return true},init:function(){this.load()},save:function(){window.name=a.store.serializers.json.encode(this.cache)},load:function(){try{this.cache=a.store.serializers.json.decode(window.name+"");if(typeof this.cache!="object"){this.cache={}}}catch(c){this.cache={};window.name="{}"}},get:function(c){return this.cache[c]},set:function(c,d){this.cache[c]=d;this.save()},del:function(c){try{delete this.cache[c]}catch(d){this.cache[c]=b}this.save()},flush:function(){window.name="{}"}}};a.store.serializers={json:{ident:"$.store.serializers.json",init:function(d,c){d.push("json");c.push("json")},encode:JSON.stringify,decode:JSON.parse},xml:{ident:"$.store.serializers.xml",init:function(d,c){d.unshift("xml");c.push("xml")},isXML:function(d){var c=(d?d.ownerDocument||d:0).documentElement;return c?c.nodeName.toLowerCase()!=="html":false},encode:function(e){if(!e||e._serialized||!this.isXML(e)){return e}var d={_serialized:this.ident,value:e};try{d.value=new XMLSerializer().serializeToString(e);return d}catch(c){try{d.value=e.xml;return d}catch(f){}}return e},decode:function(d){if(!d||!d._serialized||d._serialized!=this.ident){return d}var c=("DOMParser" in window&&(new DOMParser()).parseFromString);if(!c&&window.ActiveXObject){c=function(e){var f=new ActiveXObject("Microsoft.XMLDOM");f.async="false";f.loadXML(e);return f}}if(!c){return b}d.value=c.call("DOMParser" in window&&(new DOMParser())||window,d.value,"text/xml");return this.isXML(d.value)?d.value:b}}}})(jQuery);